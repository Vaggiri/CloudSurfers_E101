<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Tab</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Inter', sans-serif;
            color: white;
        }

        /* 
           We reuse the structure that content.js injects, 
           BUT we just load content.js and let it do its thing.
           However, content.js appends to specific containers.
           
           Actually, content.js creates a floating widget. 
           For the new tab page, we want it to look centered and prominent, 
           OR we just let the floating widget appear on a nice background.
           Let's go with the floating widget on a nice background first 
           to ensure functionality is identical.
           
           Wait, if we just load content.js, it will look like the small bot icon.
           The user probably wants a search bar in the new tab.
           
           Let's manually create the "open" state of the chat window 
           centered on the screen for the New Tab.
        */

        #newtab-center {
            text-align: center;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 2rem;
            opacity: 0.8;
            font-weight: 200;
        }

        /* Hide the toggle icon on this page, we want the window always open */
        .ai-nav-chat-icon {
            display: none !important;
        }

        /* Center the chat window naturally */
        .ai-nav-chat-window {
            position: relative !important;
            bottom: auto !important;
            right: auto !important;
            width: 500px !important;
            height: 600px !important;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>

<body>
    <div id="newtab-center">
        <h1>Where to next?</h1>
        <!-- content.js will inject the elements here if we run it. 
             But content.js appends to body. 
             Let's load content.js and let it run.
             We will modify the style via CSS to force it to be centered 
             and open by default on this specific page.
        -->
    </div>
    <script src="content.js"></script>
    <script>
        // Auto-open logic specific to newtab
        setTimeout(() => {
            const windowEl = document.getElementById('ai-nav-window');
            const toggleEl = document.getElementById('ai-nav-toggle');
            if (windowEl && windowEl.classList.contains('hidden')) {
                // Check if toggleChat is available globally? No, it's not.
                // We interact with the DOM elements directly
                windowEl.classList.remove('hidden');
                if (toggleEl) toggleEl.classList.add('hidden');
            }

            // Focus input
            const input = document.getElementById('ai-nav-input');
            if (input) input.focus();
        }, 100);
    </script>
</body>

</html>